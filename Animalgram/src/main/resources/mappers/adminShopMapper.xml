<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="adminShop">
 <sql id="search">
   <if test="searchType != null">
    <if test="searchType == 'shno'.toString()">
     where shno like '%'||#{keyword}||'%'
    </if>
    <if test="searchType == 'shtype'.toString()">
     where shtype like '%'||#{keyword}||'%'
    </if>
    <if test="searchType == 'shname'.toString()">
     where shname like '%'||#{keyword}||'%'
    </if>
    <if test="searchType == 'shaddr'.toString()">
     where shaddr like '%'||#{keyword}||'%'
    </if>
   </if>
  </sql>
 
  
  <!-- 리스트 -->
 <select id="listShop" resultType="com.animal.domain.ShopVO">
  select *
  from shop
  <include refid="search"></include>
  order by shno desc
 </select>
 
 <select id="shopCount" resultType="int">
  select count(shno)
  from shop
  <include refid="search"></include>
 </select>
 
<delete id="deleteShop">
  delete from shop
  <where>
   shno in
   <foreach collection="list" index="index" item="item" open="(" separator="," close=")">
    #{item.value}
   </foreach>
  </where>
 </delete>
</mapper>
